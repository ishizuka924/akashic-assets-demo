<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		div.btnContainer {
			display: inline-block;
			position: relative;
			/* text-align: center; */
		}

		p {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			color: white;
			user-select: none;
			text-align: center;
			font-size: 30px;
			margin: 0px;
		}

	</style>
</head>

<body>
	<div id="buttons">
	</div>
</body>
<script>
	(function () {

		const buttonCanvas = [];
		const buttonPushed = [];
		const buttonsDiv = document.getElementById("buttons");

		function buttonInit() {
			for (let i = 0; i < 16; i++) {
				const btnDiv = document.createElement("div");
				const newCanvas = document.createElement("canvas");
				btnDiv.className = "btnContainer";
				btnDiv.appendChild(newCanvas);

				const newText = document.createElement("p");
				newText.textContent = "ボタン";
				btnDiv.appendChild(newText);
				buttonsDiv.appendChild(btnDiv);

				buttonCanvas.push(newCanvas);
				buttonPushed.push(false);
			}
		}
		function createMiddleBtn(num) {
			const newCanvas = buttonCanvas[num];
			const ctx = newCanvas.getContext('2d');
			let image = new Image();
			const pushed = buttonPushed[num] ? "on" : "off";
			const img = `Buttons-main/btn${num + 1}${pushed}.png`;
			image.src = img;
			image.onload = function () {
				const imageW = image.width;
				const imageH = image.height;
				newCanvas.width = 400;
				newCanvas.height = 120;
				const x = newCanvas.width / 2 - imageW / 2;
				const y = newCanvas.height / 2 - imageH / 2;
				ctx.drawImage(image, x, y, imageW, imageH);
			}
		}
		function dispButtons() {
			buttonCanvases = document.getElementsByTagName("canvas");
			for (let i = 0; i < buttonCanvases.length; i++) {
				createMiddleBtn(i);

			}
		}
		buttonInit();
		dispButtons();
		function click() {
			buttonCanvases = document.getElementsByTagName("canvas");
			for (let i = 0; i < buttonCanvases.length; i++) {
				buttonCanvases[i].addEventListener('mousedown', function () {
					buttonPushed[i] = true;
					createMiddleBtn(i);
				});
				buttonCanvases[i].addEventListener('mouseup', function () {
					buttonPushed[i] = false;
					createMiddleBtn(i);
				});
			}
		}
		click();
	})();
</script>

</html>
