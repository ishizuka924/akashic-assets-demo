<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="stylesheet" href="../base.css" />
		<!-- Bootstrap-->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
		<!---googlefont--->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Lato:wght@100&family=Quicksand:wght@300&display=swap"
			rel="stylesheet"
		/>

		<title>合成か器</title>
	</head>
	<body>
		<div>
			<canvas id="canvas" width="96" height="128"></canvas>
		</div>
		<main>
			<div>
				<canvas id="canvas" width="96" height="128"></canvas>
			</div>
			<div class="main_container">
				<!--tabUI-->
				<ul class="nav nav-tabs tabUI">
					<li class="nav-item">
						<a
							href="#content1"
							class="nav-link active content_link"
							data-bs-toggle="tab"
							>素体</a
						>
					</li>
					<li class="nav-item">
						<a
							href="#content2"
							class="nav-link content_link"
							data-bs-toggle="tab"
							>顔</a
						>
					</li>
					<li class="nav-item">
						<a
							href="#content3"
							class="nav-link content_link"
							data-bs-toggle="tab"
							>服装</a
						>
					</li>
					<li class="nav-item">
						<a
							href="#content4"
							class="nav-link content_link"
							data-bs-toggle="tab"
							>髪型</a
						>
					</li>
				</ul>
				<!--tab_content-->
				<div class="tab-content">
					<div id="content1" class="tab-pane pane-1 active"></div>
					<div id="content2" class="tab-pane pane-2"></div>
					<div id="content3" class="tab-pane pane-3"></div>
					<div id="content4" class="tab-pane pane-4"></div>
				</div>

				<script>
					const 素材群 = [];
					素材群.push(
						[
							"-",
							"./素体/人間素体_両性1.png",
							"./素体/人間素体_両性2.png",
							"./素体/人間素体_両性3.png",
							"./素体/人間素体_女性1.png",
							"./素体/人間素体_女性2.png",
							"./素体/人間素体_女性3.png",
							"./素体/人間素体_男性1.png",
							"./素体/人間素体_男性2.png",
							"./素体/人間素体_男性3.png",
							"./素体/村人素体_シート.png",
						],
						[
							"-",
							"./顔/顔パーツタイプ1_1.png",
							"./顔/顔パーツタイプ1_10.png",
							"./顔/顔パーツタイプ1_11.png",
							"./顔/顔パーツタイプ1_2.png",
							"./顔/顔パーツタイプ1_3.png",
							"./顔/顔パーツタイプ1_4.png",
							"./顔/顔パーツタイプ1_5.png",
							"./顔/顔パーツタイプ1_6.png",
							"./顔/顔パーツタイプ1_7.png",
							"./顔/顔パーツタイプ1_8.png",
							"./顔/顔パーツタイプ1_9.png",
							"./顔/顔パーツタイプ2_1.png",
							"./顔/顔パーツタイプ2_10.png",
							"./顔/顔パーツタイプ2_11.png",
							"./顔/顔パーツタイプ2_2.png",
							"./顔/顔パーツタイプ2_3.png",
							"./顔/顔パーツタイプ2_4.png",
							"./顔/顔パーツタイプ2_5.png",
							"./顔/顔パーツタイプ2_6.png",
							"./顔/顔パーツタイプ2_7.png",
							"./顔/顔パーツタイプ2_8.png",
							"./顔/顔パーツタイプ2_9.png",
							"./顔/顔パーツタイプ3_1.png",
							"./顔/顔パーツタイプ3_10.png",
							"./顔/顔パーツタイプ3_11.png",
							"./顔/顔パーツタイプ3_2.png",
							"./顔/顔パーツタイプ3_3.png",
							"./顔/顔パーツタイプ3_4.png",
							"./顔/顔パーツタイプ3_5.png",
							"./顔/顔パーツタイプ3_6.png",
							"./顔/顔パーツタイプ3_7.png",
							"./顔/顔パーツタイプ3_8.png",
							"./顔/顔パーツタイプ3_9.png",
						],
						[
							"-",
							"./髪/髪1_短髪.png",
							"./髪/髪2_短髪.png",
							"./髪/髪3_短髪.png",
							"./髪/髪4_長髪.png",
							"./髪/髪5_長髪.png",
						],
						[
							"-",
							"./服/服1_兵士.png",
							"./服/服2_兵士.png",
							"./服/服3_魔法使い.png",
							"./服/服4_魔法使い.png",
						],
						[
							"-",
							"./帽子/帽子1_兵士.png",
							"./帽子/帽子2_兵士.png",
							"./帽子/帽子3_魔法使い.png",
							"./帽子/帽子4_魔法使い.png",
						]
					);
					const canvas = document.querySelector("canvas");
					function handleChange() {
						const indexes = Array.from(
							document.querySelectorAll("select")
						).map((select) => select.selectedIndex - 1);
						const context = canvas.getContext("2d");
						context.clearRect(0, 0, canvas.width, canvas.height);
						indexes.forEach((imageIndex, groupIndex) => {
							if (imageIndex < 0) return;
							context.drawImage(
								image群[groupIndex][imageIndex],
								0,
								0
							);
						});
					}
					const image群 = [];
					素材群.forEach((素材s, index) => {
						const images = [];
						image群.push(images);
						const select = document.createElement("select");
						select.size = 8;
						select.id = `asset${index}`;
						select.dataset.index = index;
						素材s.forEach((素材) => {
							const option = document.createElement("option");
							option.value = 素材;
							option.textContent = 素材.split("/").slice(-1);
							select.appendChild(option);
							if (素材 !== "-") {
								const image = new Image();
								image.src = 素材;
								images.push(image);
							}
						});
						document.body.appendChild(select);
						select.addEventListener("change", () => {
							handleChange();
						});
					});
				</script>
				<!-- Bootstrap用JavaScript -->
				<script
					src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
					integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
					crossorigin="anonymous"
				></script>
			</div>
		</main>
	</body>
</html>
